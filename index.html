<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ù§Ô∏èLovely Cards‚ù§Ô∏è</title>
    <style>
        /* ------------------- */
        /* –ë–∞–∑–æ–≤—ã–µ –°—Ç–∏–ª–∏ */
        /* ------------------- */
        body {
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* –∏–∑–±–µ–≥–∞–µ–º –ø—Ä–æ–±–ª–µ–º —Å 100vh */
            align-items: center;
            min-height: 100dvh; /* ‚úÖ –ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ! */
            margin: 0;
            background-color: #f8f0f0;
            font-family: 'Georgia', serif;
            color: #383838;
            padding: 15px;
            box-sizing: border-box;
        }

        h1 {
            color: #5d4a66;
            font-size: 2.5em;
            margin-bottom: 20px;
            font-weight: normal;
        }

        /* ------------------- */
        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –ö–∞—Ç–µ–≥–æ—Ä–∏–π */
        /* ------------------- */
        .category-selection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            max-width: 800px;
            margin-bottom: 30px;
        }

        .category-selection button {
            padding: 8px 15px;
            font-size: 0.9em;
            border: 2px solid;
            border-radius: 20px;
            background-color: transparent;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            color: #555;
        }

        .category-selection button:hover {
            color: white !important;
        }

        .category-selection button.active {
            color: black !important;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* ------------------- */
        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –∏ —Ç–µ–∫—Å—Ç */
        /* ------------------- */
        .card-container {
            perspective: 1000px;
            width: 90vw;
            max-width: 320px;
            height: 70vh;
            max-height: 420px;
            margin: 20px auto 40px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d; /* –î–ª—è Safari */
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            -webkit-transition: -webkit-transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-radius: 20px;
            background-color: transparent;
            transform: translateZ(0); /* –£–ª—É—á—à–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            -webkit-transform: translateZ(0);
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden; /* –î–ª—è Safari */
            text-align: center;
            box-sizing: border-box;
            padding: 30px 20px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            word-break: break-word;
            overflow-wrap: break-word;
            white-space: normal;
            font-family: 'Trebuchet MS', 'Helvetica', sans-serif;
            font-weight: 500;
        }
        
        .card-front {
            color: white;
            font-size: 1.8em;
            font-weight: bold;
            transform: rotateY(0deg);
            -webkit-transform: rotateY(0deg);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            transition: background 0.3s;
        }
        
        .card-back {
            background-color: #ffffff;
            color: #383838;
            font-size: 1.3em;
            line-height: 1.6;
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg);
            border: 5px solid;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: all 0.3s;
        }
        
        .card.is-flipped {
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg);
        }

        .card-back.dynamic-background {
            background-color: #ffffff;
            background-image: linear-gradient(180deg, rgba(255, 255, 255, 0) 50%, var(--card-soft-color) 100%);
            background-size: 100% 100%;
            transition: background-image 0.5s;
        }

        .card-back p {
            margin: 0;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            transition-delay: 0.1s;
        }

        .card.is-flipped .card-back p {
            opacity: 1;
        }

        .is-task {
            font-weight: bold;
        }

        .is-finished {
            font-weight: bold;
            color: #4a4a4a;
            font-size: 1.1em !important;
            line-height: 1.4;
        }

        /* ------------------- */
        /* –ö–Ω–æ–ø–∫–∏ */
        /* ------------------- */
        #nextQuestionButton {
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            background-color: #5d4a66;
            color: white;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(93, 74, 102, 0.4);
            transition: background-color 0.3s, transform 0.2s;
            margin-bottom: 10px;
        }

        #nextQuestionButton:hover {
            background-color: #796683;
            transform: translateY(-2px);
        }

        #resetButton {
            background-color: #f7a300;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
            margin-top: 10px;
        }
        #resetButton:hover {
            background-color: #e69500;
        }

        /* ------------------- */
        /* –ß–µ–∫–±–æ–∫—Å */
        /* ------------------- */
        .tasks-toggle-container {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95em;
            color: #5d4a66;
            margin: 15px 0;
        }

        input[type="checkbox"] {
            accent-color: #A36F8F;
            transform: scale(1.2);
        }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        #loading {
            color: #5d4a66;
            font-style: italic;
            margin-top: 20px;
        }
        /* Fallback –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –±–µ–∑ 3D (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä) */
        .no-3d .card {
            transform: none !important;
            -webkit-transform: none !important;
            transition: none !important;
        }
        
        .no-3d .card-front,
        .no-3d .card-back {
            transform: none !important;
            -webkit-transform: none !important;
            backface-visibility: visible !important;
            -webkit-backface-visibility: visible !important;
        }
        
        .no-3d .card-front {
            opacity: 1;
            transition: opacity 0.3s ease;
            position: relative;
            z-index: 2;
        }
        
        .no-3d .card.is-flipped .card-front {
            opacity: 0;
            pointer-events: none;
        }
        
        .no-3d .card-back {
            opacity: 0;
            transition: opacity 0.3s ease;
            transition-delay: 0s;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .no-3d .card.is-flipped .card-back {
            opacity: 1;
            transition-delay: 0.1s;
        }

        
    </style>
</head>
<body>

    <h1>ü•Ç –í–µ—á–µ—Ä –¥–ª—è –¥–≤–æ–∏—Ö</h1>

    <div class="category-selection">
        <button id="btn-romantic">üíû –ü—Ä–æ –Ω–∞—Å –∏ –ª—é–±–æ–≤—å</button>
        <button id="btn-flirty">üòè –®–∞–ª–æ—Å—Ç–∏ –∏ —É–ª—ã–±–∫–∏</button>
        <button id="btn-dreams">üå† –ú–µ—á—Ç—ã –∏ –±—É–¥—É—â–µ–µ</button>
        <button id="btn-fantasy">üé≠ –ê —á—Ç–æ, –µ—Å–ª–∏...?</button>
        <button id="btn-spicy18">üî• –Ø–∑—ã–∫ –∂–µ–ª–∞–Ω–∏–π 18+</button>
        <button id="btn-spicy21">üí¶ –ó–∞ –≥—Ä–∞–Ω—å—é —É—Å–ª–æ–≤–Ω–æ—Å—Ç–µ–π 21+</button>
        <button id="btn-mix">üéØ –°–ª—É—á–∞–π–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</button>
    </div>

    <div class="card-container">
        <div id="questionCard" class="card">
            <div id="cardFront" class="card-face card-front">
                <span id="categoryLabel">–ó–∞–≥—Ä—É–∑–∫–∞...</span><br><br>
                
            </div>
            <div id="cardBack" class="card-face card-back dynamic-background">
                <p id="questionContent">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞...</p>
            </div>
        </div>
    </div>

    <div class="tasks-toggle-container">
        <input type="checkbox" id="includeTasksToggle" checked>
        <label for="includeTasksToggle">–í–∫–ª—é—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è (–º–∏–Ω–∏-–∏–≥—Ä—ã, –¥–µ–π—Å—Ç–≤–∏—è)</label>
    </div>

    <button id="nextQuestionButton" style="display: none;" onclick="showRandomQuestionOrTask()">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</button>

    <button id="resetButton" style="display: none;" onclick="resetLocalStorage()">–ù–∞—á–∞—Ç—å –ù–æ–≤—É—é –ò–≥—Ä—É (–°–±—Ä–æ—Å–∏—Ç—å)</button>

    <div id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤...</div>

<script>
        const colors = {
            romantic: { gradient: 'linear-gradient(135deg, #A36F8F 0%, #D8B8C2 100%)', mainColor: '#A36F8F', softColor: 'rgba(163, 111, 143, 0.28)', shadowColor: '#5d4a66' },
            flirty: { gradient: 'linear-gradient(135deg, #FF7AA2 0%, #FFB8B8 100%)', mainColor: '#FF7AA2', softColor: 'rgba(255, 122, 162, 0.28)', shadowColor: '#E65A8C' },
            dreams: { gradient: 'linear-gradient(135deg, #5D54A4 0%, #A49FDB 100%)', mainColor: '#5D54A4', softColor: 'rgba(93, 84, 164, 0.28)', shadowColor: '#453E85' },
            fantasy: { gradient: 'linear-gradient(135deg, #74A892 0%, #BBD1C9 100%)', mainColor: '#74A892', softColor: 'rgba(116, 168, 146, 0.28)', shadowColor: '#5A8B74' },
            spicy18: { gradient: 'linear-gradient(135deg, #8B0036 0%, #C03957 100%)', mainColor: '#C03957', softColor: 'rgba(192, 57, 87, 0.28)', shadowColor: '#8B0036' },
            spicy21: { gradient: 'linear-gradient(135deg, #C6286D 0%, #F06292 100%)', mainColor: '#F06292', softColor: 'rgba(240, 98, 146, 0.28)', shadowColor: '#C6286D' },
            mix: { gradient: 'linear-gradient(135deg, #A400BF 0%, #00C6FF 100%)', mainColor: '#A400BF', softColor: 'rgba(164, 0, 191, 0.28)', shadowColor: '#7A0099' }
        };

        const categoryNames = {
            romantic: 'üíû –ü—Ä–æ –Ω–∞—Å –∏ –ª—é–±–æ–≤—å',
            flirty: 'üòè –®–∞–ª–æ—Å—Ç–∏ –∏ —É–ª—ã–±–∫–∏',
            dreams: 'üå† –ü–ª–∞–Ω—ã –∏ –º–µ—á—Ç—ã',
            fantasy: 'üé≠ –ê —á—Ç–æ, –µ—Å–ª–∏...?',
            spicy18: 'üî• –Ø–∑—ã–∫ –∂–µ–ª–∞–Ω–∏–π 18+ ',
            spicy21: 'üí¶ –ó–∞ –≥—Ä–∞–Ω—å—é —É—Å–ª–æ–≤–Ω–æ—Å—Ç–µ–π 21+ ',
            mix: 'üéØ –°–ª—É—á–∞–π–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ'
        };

        const CATEGORY_KEYS = ['romantic', 'flirty', 'dreams', 'fantasy', 'spicy18', 'spicy21'];
        const CHANCE_FOR_TASK = 0.30;
        const CARD_FLIP_DURATION = 300;

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let contentState = {};
        let sessionHistory = {};
        let baseButtonStyles = {};

        const cardElement = document.getElementById('questionCard');
        const cardFront = document.getElementById('cardFront');
        const cardBack = document.getElementById('cardBack');
        const questionContent = document.getElementById('questionContent');
        const nextQuestionButton = document.getElementById('nextQuestionButton');
        const resetButton = document.getElementById('resetButton');
        const loadingIndicator = document.getElementById('loading');

        let currentCategory = 'romantic';

        // --- –§—É–Ω–∫—Ü–∏–∏ ---

        function saveHistory() {
            localStorage.setItem('sessionHistory', JSON.stringify(sessionHistory));
        }

        function loadHistory() {
            const history = localStorage.getItem('sessionHistory');
            sessionHistory = history ? JSON.parse(history) : {};
        }

        function resetLocalStorage() {
            localStorage.removeItem('sessionHistory');
            window.location.reload();
        }

        function markdownToHtml(text) {
            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>');
        }

        function getAvailableContent(categoryKey) {
            if (categoryKey === 'mix') {
                let allAvailable = [];
                for (const cat of CATEGORY_KEYS) {
                    allAvailable.push(...getAvailableContent(cat));
                }
                return allAvailable;
            }

            const categoryContent = contentState[categoryKey] || [];
            const categoryHistory = sessionHistory[categoryKey] || [];

            return categoryContent.filter(item => {
                const key = `${item.isTask ? 'task' : 'q'}:${item.content}`;
                return !categoryHistory.includes(key);
            });
        }

        function getNextContent() {
            let availableContent = [];

            if (currentCategory === 'mix') {
                availableContent = getAvailableContent('mix');
            } else {
                availableContent = getAvailableContent(currentCategory);
            }

            if (availableContent.length === 0) {
                return null;
            }

            const includeTasks = document.getElementById('includeTasksToggle').checked;
            let nextContent = null;

            if (includeTasks && Math.random() < CHANCE_FOR_TASK) {
                const availableTasks = availableContent.filter(item => item.isTask);
                if (availableTasks.length > 0) {
                    const randomIndex = Math.floor(Math.random() * availableTasks.length);
                    nextContent = availableTasks[randomIndex];
                }
            }

            if (!nextContent) {
                const availableQuestions = availableContent.filter(item => !item.isTask);
                if (availableQuestions.length > 0) {
                    const randomIndex = Math.floor(Math.random() * availableQuestions.length);
                    nextContent = availableQuestions[randomIndex];
                } else if (includeTasks) {
                    const availableTasks = availableContent.filter(item => item.isTask);
                    if (availableTasks.length > 0) {
                        const randomIndex = Math.floor(Math.random() * availableTasks.length);
                        nextContent = availableTasks[randomIndex];
                    }
                }
            }

            if (nextContent) {
                const targetCategory = nextContent.category;
                const key = `${nextContent.isTask ? 'task' : 'q'}:${nextContent.content}`;
                if (!sessionHistory[targetCategory]) {
                    sessionHistory[targetCategory] = [];
                }
                if (!sessionHistory[targetCategory].includes(key)) {
                    sessionHistory[targetCategory].push(key);
                    saveHistory();
                }

                return {
                    content: nextContent.content,
                    isTask: nextContent.isTask,
                    category: targetCategory
                };
            }

            return null;
        }

        function initializeCategoryButtons() {
            CATEGORY_KEYS.concat(['mix']).forEach(cat => {
                const btn = document.getElementById(`btn-${cat}`);
                if (btn) {
                    const color = colors[cat];
                    baseButtonStyles[cat] = {
                        borderColor: color.mainColor,
                        color: color.mainColor
                    };
                    btn.style.borderColor = color.mainColor;
                    btn.style.color = color.mainColor;
                    btn.onclick = () => setCategory(cat);
                }
            });
        }

        function setCategory(category) {
            currentCategory = category;

            // –°–±—Ä–æ—Å –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            CATEGORY_KEYS.concat(['mix']).forEach(cat => {
                const btn = document.getElementById(`btn-${cat}`);
                if (btn) {
                    btn.classList.remove('active');
                    const base = baseButtonStyles[cat];
                    if (base) {
                        btn.style.backgroundColor = '';
                        btn.style.color = base.color;
                        btn.style.borderColor = base.borderColor;
                        btn.style.boxShadow = '';
                    }
                }
            });

            // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π
            const activeBtn = document.getElementById(`btn-${category}`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                const c = colors[category];
                activeBtn.style.backgroundColor = c.mainColor;
                activeBtn.style.color = 'black';
                activeBtn.style.borderColor = c.mainColor;
                activeBtn.style.boxShadow = `0 4px 10px ${c.shadowColor}50`;
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
            const c = colors[category];
            cardFront.style.background = c.gradient;
            cardBack.style.borderColor = c.mainColor;
            cardBack.style.setProperty('--card-soft-color', c.softColor);
            nextQuestionButton.style.backgroundColor = c.mainColor;
            nextQuestionButton.style.boxShadow = `0 6px 20px ${c.shadowColor}40`;

            cardElement.classList.remove('is-flipped');
            questionContent.classList.remove('is-task', 'is-finished');
            questionContent.style.color = '#383838';

            const availableCount = getAvailableContent(currentCategory).length;
            if (availableCount === 0) {
                showFinishedMessage();
            } else {
                questionContent.textContent = "–ù–∞–∂–º–∏—Ç–µ '–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å', —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.";
                document.getElementById('categoryLabel').textContent = categoryNames[category];
                nextQuestionButton.style.display = 'block';
                resetButton.style.display = 'none';
            }
        }

        function showFinishedMessage() {
            document.getElementById('categoryLabel').textContent = categoryNames[currentCategory];
            questionContent.textContent = `–í–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–¥–∞–Ω–∏—è ${currentCategory === 'mix' ? '–≤–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö' : '–≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'} –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å! –í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–ª–∏ —Å–±—Ä–æ—Å—å—Ç–µ –∏–≥—Ä—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.`;
            questionContent.classList.add('is-finished');
            questionContent.style.color = '#4a4a4a';
            nextQuestionButton.style.display = 'none';
            resetButton.style.display = 'block';
            cardElement.classList.remove('is-flipped');
            setTimeout(() => {
                cardElement.classList.add('is-flipped');
            }, CARD_FLIP_DURATION);
        }

        function showRandomQuestionOrTask() {
            const wasFlipped = cardElement.classList.contains('is-flipped');
            if (wasFlipped) {
                cardElement.classList.remove('is-flipped');
            }

            const delay = wasFlipped ? CARD_FLIP_DURATION : 0;

            setTimeout(() => {
                const result = getNextContent();

                if (!result) {
                    showFinishedMessage();
                    return;
                }

                const resultCategoryColors = colors[result.category];
                cardBack.style.borderColor = resultCategoryColors.mainColor;
                cardBack.style.setProperty('--card-soft-color', resultCategoryColors.softColor);

                questionContent.innerHTML = markdownToHtml(result.content);
                questionContent.classList.toggle('is-task', result.isTask);

                if (result.isTask) {
                    questionContent.style.color = resultCategoryColors.mainColor;
                } else {
                    questionContent.style.color = '#383838';
                }

                cardElement.classList.add('is-flipped');
            }, delay);
        }

        // --- –ó–∞–≥—Ä—É–∑–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö ---
        async function loadContentFromFiles() {
            try {
                const [questionsRes, tasksRes] = await Promise.all([
                    fetch('questions.json'),
                    fetch('tasks.json')
                ]);

                if (!questionsRes.ok || !tasksRes.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤');
                }

                const questions = await questionsRes.json();
                const tasks = await tasksRes.json();

                contentState = {};
                CATEGORY_KEYS.forEach(cat => {
                    const qList = questions[cat] || [];
                    const tList = tasks[cat] || [];
                    const questionsMapped = qList.map(q => ({ content: q, isTask: false, category: cat }));
                    const tasksMapped = tList.map(t => ({ content: t, isTask: true, category: cat }));
                    contentState[cat] = [...questionsMapped, ...tasksMapped];
                });

                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                if (loadingIndicator) loadingIndicator.style.display = 'none';
                nextQuestionButton.style.display = 'block';
                document.getElementById('categoryLabel').textContent = categoryNames[currentCategory];
                questionContent.textContent = "–ù–∞–∂–º–∏—Ç–µ '–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å', —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.";

            } catch (error) {
                console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã/–∑–∞–¥–∞–Ω–∏—è:', error);
                if (loadingIndicator) {
                    loadingIndicator.textContent = '‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã questions.json –∏ tasks.json.';
                    loadingIndicator.style.color = '#c03957';
                }
            }
        }
        // –î–µ—Ç–µ–∫—Ü–∏—è –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞
        function isYandexBrowser() {
            return /YaBrowser/.test(navigator.userAgent);
        }

            // –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞
        if (/YaBrowser/.test(navigator.userAgent)) {
            document.body.classList.add('no-3d');
        }

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ---
        window.onload = async function() {
            initializeCategoryButtons();
            loadHistory();
            await loadContentFromFiles();
            setCategory('romantic');
        };
    </script>
</body>

</html>


